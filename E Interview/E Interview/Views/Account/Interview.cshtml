
@{
    ViewBag.Title = "Interview";
}

<h2 style="padding-left:500px; padding-bottom:20px;">Interview</h2>
<p id="time">05:00</p>
    <div id="question">
        @Html.Action("Question")
    </div>

    <script src="~/Scripts/jquery-1.10.2.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("body").on("click", ".navigation-button", function () {
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("Question")" + "?page=" + (parseInt($("#current-page").val()) + parseInt($(this).attr("data-value"))) + "&currentPage=" + parseInt($("#current-page").val()) + "&value=" + $("input[name='ans']:checked").val(),
                    success: function (data) {
                        $(".form-horizontal").html(data);
                    }
                });
            });

            //complete-interview

            $("body").on("click", ".complete-interview", function () {
                var buttonClick = confirm("This will submit your answer");

                if (buttonClick) {
                    location.href = "@Url.Action("InterviewComplete")" + "?currentPage=" + parseInt($("#current-page").val()) + "&value=" + $("input[name='ans']:checked").val();
                }

            });
        });

        function startTimer(duration, display) {
            var timer = duration, minutes, seconds;
            setInterval(function () {
                minutes = parseInt(timer / 60, 10)
                seconds = parseInt(timer % 60, 10);

                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;

                display.textContent = minutes + ":" + seconds;

                if (--timer < 0) {
                    alert("Time up");

                    location.href = "@Url.Action("InterviewComplete")";
                }
            }, 1000);
        }

        window.onload = function () {
            var fiveMinutes = 60 * 5,
                display = document.querySelector('#time');
            startTimer(fiveMinutes, display);
        };
    </script>

